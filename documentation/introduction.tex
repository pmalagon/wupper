\section{Introduction}
Wupper\footnote{The person performing the act of bongelwuppen, the Gronings version of the famous Frisian sport of the Fierljeppen (canal pole vaulting) \url{https://nds-nl.wikipedia.org/wiki/Nedersaksische_sp\%C3\%B6llegies\#Bongelwuppen}} is designed for the ATLAS / FELIX project \cite{felix}, to provide a simple
Direct Memory Access (DMA) interface for the Xilinx Virtex-7 PCIe Gen3 hard block. The core is not meant to be flexible among different architectures, but especially designed for the 256 bit wide AXI4-Stream interface~\cite{ug761}  of the Xilinx Virtex-7 and Ultrascale FPGA Gen3 Integrated Block for PCI Express (PCIe)~\cite{xilinxcore} and~\cite{pg023}.

The purpose of Wupper is therefore to provide an interface to a standard FIFO. This FIFO has the same width as the Xilinx AXI4-Stream interface (256 bits) and runs at 250 MHz. The user application side of the FPGA design can simply read or write to the FIFO; Wupper will handle the transfer into Host PC memory, according to the addresses specified in the DMA descriptors. Several descriptors can be queued, up to a maximum of 8, and they will be processed sequentially one after the other. 

Another functionality of Wupper is to manage a set of DMA descriptors, with an $address$, a $read/\overline{write}$ flag, the $transfer size$ (number of 32 bit words) and an $enable$ line. These descriptors are mapped as normal PCIe memory or IO registers. Besides the descriptors and the enable line (one per descriptor), a status register for every descriptor is provided in the register map.
 
The high level structure of the core has been designed in HDL Works Ease~\cite{ease}, however this program generates readable VHDL output. Design entry tools are useful to give a graphical view of the HDL project, however it can be more convenient to use the VHDL code itself. Therefore both the Ease project, as well as the output from Ease are supplied in the Wupper repository. In order to use Wupper it is not necessary to obtain a copy of Ease.

For synthesis and implementation of the Xilinx specific IP cores, it is recommend to use the latest Xilinx Vivado release as listed in section~\ref{sec:supported_tools}. The cores (FIFO, clock wizard and PCIe) are provided in the Xilinx .xci format, as well as the constraints file (.xdc) is in the Vivado Format.

For portability reasons, no Xilinx project files will be supplied with the core, but a bundle of TCL scripts has been supplied to create a project and import all necessary files, as well as to do the synthesis and implementation. These scripts will be described later in this document.


\newpage
